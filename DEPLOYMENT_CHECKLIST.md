# –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω—ã (—É–∂–µ –≥–æ—Ç–æ–≤–æ)

- [x] Firebase Cloud Functions –ø—Ä–æ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- [x] TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [x] –ú–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API —Å–æ–∑–¥–∞–Ω—ã
- [x] Cloud Function `onDiaryPostCreated` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [x] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [x] –ö–æ–¥ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫ (TypeScript ‚Üí JavaScript)
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞

## üìã –ü–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º –Ω–∞ production

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Firebase CLI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
```bash
npm install -g firebase-tools
firebase login
firebase use your-project-id
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Firebase
```bash
firebase projects:list
firebase functions:list  # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –µ—Å–ª–∏ –µ—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Firebase
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–û–î–ò–ù –†–ê–ó)
firebase functions:config:set telegram.bot_token="8110733520:AAHmTrG8NXm1DwFeSrA5POaiDpgu2gKHaUk"
firebase functions:config:set telegram.chat_id="-5180269549"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
firebase functions:config:get
```

### 4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–∑–≤–∞–Ω–∞
- –ö–æ–ª–ª–µ–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è: `diary_posts`
- –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å: `title`, `content`, `author`, `createdAt`

### 5. –û–±–Ω–æ–≤–∏—Ç—å firebase.json (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `functions`:
```json
{
  "functions": {
    "source": "functions",
    "codebase": "default",
    "runtime": "nodejs20"
  }
}
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ Cloud Functions
```bash
cd /Users/sergey/Documents/thailand-family-trip
firebase deploy --only functions
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë –≤–º–µ—Å—Ç–µ (Functions + Hosting + Firestore)
```bash
firebase deploy
```

–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç. –î–æ–∂–¥–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è:
```
‚úî  Deploy complete!
```

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### 1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞
```bash
firebase functions:list
# –î–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏—è: onDiaryPostCreated
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
```bash
firebase functions:log --follow
```

### 3. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å –≤ Firestore
–ß–µ—Ä–µ–∑ Firebase Console:
- –ü–µ—Ä–µ–π–¥–∏ –≤ Firestore Database
- –°–æ–∑–¥–∞–π –∫–æ–ª–ª–µ–∫—Ü–∏—é `diary_posts` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞)
- –î–æ–±–∞–≤—å –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø–æ–ª—è–º–∏:
  ```
  title: "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å"
  content: "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
  author: "–¢–µ—Å—Ç"
  createdAt: (—Å–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞)
  ```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram
- –û—Ç–∫—Ä–æ–π—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram
- –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Ä–æ–¥–µ:
```
üìù –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å
–ê–≤—Ç–æ—Ä: –¢–µ—Å—Ç
–î–∞—Ç–∞: 30.12.2025

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#diarypost #xxx...
```

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –§—É–Ω–∫—Ü–∏—è –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
   ```bash
   firebase functions:log
   ```
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤ —Å–ø–∏—Å–∫–µ:
   ```bash
   firebase functions:list
   ```
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–æ–≤–Ω–æ `diary_posts`

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
cd functions
rm -rf lib node_modules
npm install
npm run build

# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∑–∞–Ω–æ–≤–æ
firebase deploy --only functions
```

### –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```bash
   firebase functions:config:get
   ```
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ID –≥—Ä—É–ø–ø—ã (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π)
4. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –≤ Firebase Console

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `functions/README.md` - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Functions
- `FIREBASE_SETUP.md` - –ø–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase
- `functions/TESTING.md` - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `INTEGRATION.md` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üéØ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å
firebase deploy --only functions

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ (—Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
firebase functions:log --follow

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫)
firebase functions:log

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
firebase functions:list

# –£–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
firebase functions:delete onDiaryPostCreated

# –ü–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å Functions
cd functions && npm run build && cd ..

# –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
firebase deploy
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- Telegram —Ç–æ–∫–µ–Ω –∏ ID —á–∞—Ç–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –Ω–µ –≤ –∫–æ–¥–µ
- –§—É–Ω–∫—Ü–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¢–û–õ–¨–ö–û –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (onCreate), –Ω–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- –°–æ–æ–±—â–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –ª–∏–º–∏—Ç–æ–≤ Telegram
- –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
1. ‚úÖ –§—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π
2. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤ Telegram –≥—Ä—É–ø–ø—É
3. ‚úÖ –¢–æ–∫–µ–Ω—ã –∑–∞—â–∏—â–µ–Ω—ã –∏ –Ω–µ –≤–∏–¥–Ω—ã –≤ –∫–æ–¥–µ
4. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
